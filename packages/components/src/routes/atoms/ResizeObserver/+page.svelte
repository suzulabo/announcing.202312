<script lang="ts">
  import ResizeObserver from '$lib/atoms/ResizeObserver.svelte';

  let small = false;
  let overflow = false;
</script>

<div class="container">
  <button
    on:click={() => {
      small = !small;
    }}>{small ? 'Normal' : 'Small'}</button
  >
  <div class="wrapper" class:small>
    <ResizeObserver
      onResize={({ el }) => {
        overflow = el.scrollHeight > el.clientHeight;
      }}
    >
      <div class="overflow-fade" class:overflowing={overflow}>
        Announcing is the world’s most boring web service, by design. Unlike traditional social
        media platforms, it strips away all the noise—there are no likes, comments, shares, or user
        interactions. It’s a space free from the clutter of social engagement, allowing you to focus
        solely on the content you care about. Essentially, Announcing is a stripped-down version of
        a social media platform, where RSS feeds take center stage in a minimalistic, familiar UI.
        You can follow your favorite websites and blogs without distractions or the risk of your
        data being tracked. Announcing has a strict no-tracking policy, ensuring your privacy is
        protected. No algorithms, no ads, and no intrusive data collection. It’s just pure content,
        delivered simply.
      </div>
    </ResizeObserver>
  </div>
</div>

<style lang="scss">
  .container {
    max-width: 600px;
    margin: 20px auto;
    display: flex;
    flex-direction: column;
    gap: 16px;

    .wrapper {
      padding: 8px;
      border: 2px solid silver;
      border-radius: 8px;

      &.small {
        max-width: 400px;
      }

      .overflow-fade {
        position: relative;
        overflow: hidden;
        max-height: 250px;

        &.overflowing:after {
          position: absolute;
          bottom: 0;
          top: 0;
          left: 0;
          right: 0;
          content: '';
          background: linear-gradient(
            to top,
            rgba(var(--color-background-rgb), 1),
            rgba(var(--color-text-rgb), 0) 20%
          );
          pointer-events: none;
        }
      }
    }
  }
</style>
